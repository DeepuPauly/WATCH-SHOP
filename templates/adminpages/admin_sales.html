{% if request.session.utype == 'admin' %}
    {% include 'adminpages/admin_header.html' %}
{% elif  request.session.utype == 'Working Staff' %}
    {% include 'working_staff_pages/working_staff_header.html' %}
{% endif %}
<div class="table text-start align-middle table-bordered table-hover mb-0">
    <div class="mb-3">
      <input type="number" id="minAmount" placeholder="Min Amount">
      <input type="number" id="maxAmount" placeholder="Max Amount">
      <input type="date" id="dateFilter">
    </div>
    <div class="table text-start align-middle table-bordered table-hover mb-0">
      <div class="table text-start align-middle table-bordered table-hover mb-0">
        <div class="card-body" id="div_print">
          <p id="eliteWristHeading" style="display: none; border-bottom: 2px solid rgb(0, 0, 0);">
            <span style="font-size: 60px;"><b>Elite <span style="color: red;">Wrist</span></b><br>
            <span style="font-size: small;">Date : {{today_date}} <br>Time : {{current_time}}</span></span>
        </p>
         <h4 class="card-title">Order view</h4>
          <div class="table-responsive">
            <!-- Add filter inputs -->
            
            <table class="table" id="table">
              <thead>
                <tr>
                  <th>Sl.No</th>
                  <th>Customer Name</th>
                  <th>Contact Details</th>
                  <th>Order Date</th>
                  <th>Order Status</th>
                  <th>Amount</th>
  
                </tr>
              </thead>
              <tbody>
                {% for i in q %}
                <tr>
                  <td>{{forloop.counter}}</td>
                  <td>{{i.CART_MASTER.CUSTOMER.Customer_Fname}}</td>
                  <td>{{i.A_Phone}}</td>
                  <td>{{i.Order_Date}}</td>
                  <td>{{i.Order_Status}}</td>
                  <td>{{i.Order_Amount}}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <button onclick="printDiv()" class="btn btn-danger" style="margin-left:800px;margin-top:30px">Download</button>
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
  
  <script>
    // Function to apply filters
    function applyFilters() {
      var minAmount = parseFloat($('#minAmount').val());
      var maxAmount = parseFloat($('#maxAmount').val());
      var date = $('#dateFilter').val();
      console.log("Min Amount:", minAmount, "Max Amount:", maxAmount, "Date:", date);
      // Loop through each row in the table
      $('#table tbody tr').each(function() {
        var row = $(this);
        var rowAmount = parseFloat(row.find('td:eq(5)').text()); // Get the amount column value
        var rowDate = row.find('td:eq(3)').text(); // Get the date column value (assuming it's at index 3)
        console.log("Row Amount:", rowAmount, "Row Date:", rowDate);
        // Show/hide row based on filter criteria
        if ((isNaN(minAmount) || rowAmount >= minAmount) &&
            (isNaN(maxAmount) || rowAmount <= maxAmount) &&
            (date === '' || rowDate === date)) {
          row.show();
        } else {
          row.hide();
        }
      });
    }
  
    // Trigger filtering when the user finishes typing in the filter inputs
    $(document).ready(function() {
      $('#minAmount, #maxAmount, #dateFilter').on('input', function() {
        applyFilters();
      });
    });
  
  
      function printDiv() { 
        var divContents = document.getElementById("div_print").innerHTML; 
        var a = window.open('', '', 'height=500, width=500'); 
        a.document.write(divContents); 
        a.document.close(); 
        a.print(); 
      } 
  </script>


<script>
  // Function to toggle visibility of the heading
  function toggleHeadingVisibility() {
      var heading = document.getElementById("eliteWristHeading");
      if (heading.style.display === "none") {
          heading.style.display = "block";
      } else {
          heading.style.display = "none";
      }
  }

  // Function to print the content
  function printDiv() {
      toggleHeadingVisibility(); // Toggle visibility before printing
      var divContents = document.getElementById("div_print").innerHTML;
      var a = window.open('', '', 'height=500, width=500');
      a.document.write(divContents);
      a.document.close();
      a.print();
      toggleHeadingVisibility(); // Toggle visibility back after printing
  }
</script>

<style>
  /* Hide the heading by default */
  #eliteWristHeading {
      display: none;
  }
</style>


  
  <style>
    .mb-3 input[type="number"],
    .mb-3 input[type="date"] {
      width: 120px; /* Adjust width as needed */
      padding: 8px; /* Adjust padding as needed */
      margin-right: 10px; /* Adjust margin as needed */
      border: 1px solid #ff0000; /* Adjust border color as needed */
      border-radius: 4px; /* Adjust border radius as needed */
      box-sizing: border-box; /* Ensure padding and border are included in width */
    }
  
    .mb-3 input[type="number"]:focus,
    .mb-3 input[type="date"]:focus {
      outline: none; /* Remove outline on focus */
      border-color: #000; /* Adjust border color on focus */
    }
  </style>


{%include 'footer.html'%}
  